---
import { SITE } from '@config/site.ts';
import { getLocaleMessages } from '@i18n/index.ts';
import { wKey } from '@utils/index.ts';
import type { CollectionEntry, CollectionKey } from 'astro:content';
import { render } from 'astro:content';
import type { WithChildren } from '../../types.ts';

/**
 * Props for rendering a Markdown article from the content collection.
 *
 * @property entry - The content collection entry to render
 */
interface Props extends WithChildren<false> {
	entry: CollectionEntry<CollectionKey>;
}

const config = {
	site: SITE,
};
const msg = getLocaleMessages(Astro);

const { entry, ...restProps } = Astro.props;

const { Content } = await render(entry);
---

<article {...restProps} {...wKey('article', entry.slug)}>
	<Content {config} {msg} />
</article>
