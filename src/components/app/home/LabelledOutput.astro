---
import Label from '@components/ui/Label.astro';
import Output from '@components/ui/Output.astro';
import type { OutputId } from '@config/output.ts';
import { getLocaleMessages } from '@i18n/index.ts';
import { wKey } from '@utils/index.ts';
import type { WithChildren } from '../../../types.ts';

/**
 * Props for an labelled output field displaying a computed text statistic.
 *
 * @property id - The output field ID (ex. 'words', 'characters')
 */
interface Props extends WithChildren<false> {
	id: OutputId;
}

const { id } = Astro.props;

const msg = getLocaleMessages(Astro).output;
const label = msg.map[id].label;
---

<Label aria-live="polite" aria-atomic="true" {...wKey(id, 'label')}>
	{label}
	<Output {id} />
</Label>

<style>
	label {
		flex-direction: column;
		flex: 1;
		padding: var(--p-md);
		background-color: var(--bg-2);
	}
</style>
